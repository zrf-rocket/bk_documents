# 术语解释

在使用蓝鲸权限中心产品前，快速了解一些基本名词概念。

## 系统 

蓝鲸体系内各大平台或 SaaS，非蓝鲸框架的应用需在蓝鲸开发者中心注册为蓝鲸 SaaS。

## 操作 

接入系统中需要做权限控制的某个场景功能，如作业新建、主机转移、菜单查看等，一个操作最好是最小原子功能，操作应该是**可枚举相对静态的**，一个系统的操作数量有可能随着系统功能模块的增加而增加，但一般不会随着时间的推移无限增长。

## 资源类型

简称 **资源** ，指各系统需要做权限控制的**操作**所关联的对象，如**作业新建**关联的对象是**作业**、**主机转移**关联的对象是**主机**等，作业、主机都是一种**资源类型**。

## 资源实例 

资源实例是某种资源类型的具体实例化对象，也是权限控制的最小粒度，如具体**某个作业**、**某台主机**等，一般来说资源实例是**动态的**，会随着时间推移线性增长。 

## 实例视图

接入系统可以根据自己的业务场景，向权限中心自定义`注册`多种实例视图，一种实例视图代表了一种实例的选择方式，用户在申请权限关联资源实例时，可以切换不同的 **实例视图** 来选择实例权限。

![image-20210322111756643](Trem/image-20210322111756643.png)

## 资源属性

**资源属性** 是权限中心筛选资源实例的一种方式，满足那些需要动态授权的场景。

![image-20210409154928258](Trem/image-20210409154928258.png)

## 新建关联权限

为了方便用户的权限获得，权限中心提供了新建关联权限的功能，用户申请某个资源的新建操作时，可以 **同时获得** 新建资源实例的其他操作权限。比如用户申请**作业新建**权限，用户新建某个作业时，自动拥有该作业的**删除、编辑、查看**等权限，不需要用户二次申请。

## 依赖操作

当用户申请的操作权限必须依赖其他某些前置操作权限时，比如用户申请 **作业编辑** ，必须依赖 **作业查看** 的操作权限，作业查看 就是 作业编辑 的依赖操作，用户不需要关心依赖操作，权限中心会自动处理依赖逻辑，用户直奔目标选择需要的权限即可。

## 依赖资源

在蓝鲸权限中心，接入系统分别注册 `操作` 和 `资源` ，也需要注册操作和资源的关联关系，操作关联的资源称为这个操作的依赖资源，依赖资源必须是该操作 `缺一不可` 的，对一个操作来说可有可无的资源不是依赖资源，一个操作的依赖资源可以没有依赖资源，也可以有多个，多个依赖资源的注册顺序跟前端展示和鉴权顺序保持一致。

> 比如 作业执行 操作的依赖资源是作业、主机、账号，因为要执行一个作业，这三个资源是缺一不可的，但脚本就不是依赖资源，因为一个作业可以没有脚本步骤。

大部分操作的依赖资源都包含目标资源，但也存在依赖资源是上级资源的情况。

> 比如 作业编辑 的依赖资源就是作业本身，但是 作业新建 的依赖资源则是他的上级资源 业务，因为作业只能选择在某个业务下新建。

## 操作组

操作组是接入系统，根据系统使用习惯，将相同场景的操作按操作组归类，方便用户/管理员在权限中心勾选操作权限。
操作组只是前端勾选操作时的体验优化，不涉及底层逻辑的依赖。

> 比如，作业平台有`作业执行、作业删除、脚本执行、脚本查看、IP白名单新建、全局设置管理`几个操作。

加上操作组后，前端表现为：
![image-20210322111439099](Trem/image-20210322111439099.png)

操作组名称，操作组以及组内元素顺序，由各接入系统定义，目前权限中心支持`两级操作组`设置。

**重要！！！！**
`各接入系统根据需要，可以定义0（不需要分类）、1、2级操作组`，操作可以按照`资源类型归类`、也可以按照`用户使用场景来归类`，`一个操作只能属于一个操作组，不能重叠。`

## 版本

权限中心针对接入系统注册的资源和操作，提供 `版本` 支持，版本仅用来给接入系统在系统接入页面区分新旧资源和操作的展示。

## 权限模板

权限模板是若干操作的集合，一个权限模板代表了一种岗位角色需要的场景权限，比如运维、开发、测试，一个模板只能包含一个系统的操作。

## 用户组

用户组是权限中心推荐的权限管理方式，一个用户组可以关联多个系统的多个权限模板，从而具备对应的权限，管理员只需要往用户组添加**用户/组织**即可让对应的用户获得用户组的所具备的权限。

## 自定义权限

权限中心除了通过用户组方式来管理用户权限，还支持更加灵活的授权方式：自定义权限，用户可以选择任意的操作和实例作为他场景需要的权限，由于该权限的灵活性，不像用户组那样方便管理，所以为了不给后期权限管理带来混乱，请谨慎使用，当前 1 个人拥有**1个操作 + 1个资源类型**的实例权限**最大**数量为 10000 个。

## 分级管理员

分级管理员是权限中心的自定义权限管理员，成为分级管理员后可以分配相应的资源权限给其他用户。

