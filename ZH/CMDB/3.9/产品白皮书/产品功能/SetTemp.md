# 集群模版

集群模板可以定义业务通用的集群结构，用于[业务拓扑](./BusinessTopology.md)中快速部署和维护集群。此功能依赖已经存在[服务模板](./ServiceTemp.md)。

## 创建集群模版

进入“业务-集群模版”，点击“创建”新建集群模版。

![1581930103417](../media/1581930103417.png)
<center>图1：开始集群模版</center>

集群模版主要有两个信息：

- 模版名称：集群模版的标识，在使用的时候可以识别即可
- 集群拓扑：集群由哪些模块服务模版构成。在实际使用中，会根据服务模版创建模块实例

![1581930276733](../media/1581930276733.png)
<center>图2：新建集群模版</center>

![1581930447405](../media/1581930447405.png)
<center>图3：查看集群模版列表</center>

## 使用集群模版

进入到“业务-业务拓扑”，创建集群的时候，选择从模版创建，补充集群名称即可。

![1581931697448](../media/1581931697448.png)
<center>图4：使用集群模版创建集群</center>

创建业务完成以后，可以看到在业务下已经创建了包含模块的拓扑，用户可以直接分配主机到拓扑中。

![1581932223130](../media/1581932223130.png)
<center>图5：完成创建集群</center>

## 同步

集群模版的结构发生变化后，可以通过同步功能批量更新到集群实例中。

需要注意的是，同步操作是异步进行，在同步完成前，尽可能不要对当前集群做变更。

![1581932601727](../media/1581932601727.png)
<center>图6：修改集群模版成功</center>

![1581932640006](../media/1581932640006.png)
<center>图7：同步集群模版</center>

![1581932657282](../media/1581932657282.png)
<center>图8：同步集群模版确认</center>

## 删除

为了保证配置的安全和准确，集群模版的删除，需要先清理已存在的关联集群。
