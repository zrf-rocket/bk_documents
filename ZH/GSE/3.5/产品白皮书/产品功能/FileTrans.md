# 文件传输

文件传输是指用户从指定机器将指定文件批量传输到指定的目标机器上，文件传输具备以下几个特性。

## 传输模式

<table><tbody>
<tr><th width="30%">传输模式</th><th width="75%">详情</th></tr>
<tr><td><b>BT 模式</b></td><td>对于大于 10KB 的文件，蓝鲸管控平台将自动启用 BT 作为首选的传输方式</td></tr>
<tr><td><b>直传模式</b></td><td>对于 10KB 以下的小文件，将使用 tcp 数据流 直传模式。</td></tr>
<tr><td><b>混合模式</b></td><td>在 BT 模式下，如果发生 BT 传输持续性失败，则会尝试使用直传模式传输 BT 文件分片，当 BT 传输恢复时，则自动切换至 BT 模式。</td></tr>
</tbody></table>

## 传输类型

<table><tbody>
<tr><th width="30%">传输类型</th><th width="75%">详情</th></tr>
<tr><td><b>文件传输</b></td><td>分发单个文件到指定机器，这里文件可以是任何格式，任何可读目录下的可读文件；<br>文件分发完成后，会自动同步目标文件权限与源文件一致；<br>对于直传模式，文件传输结束后会进行 MD5 校验，<br>对于 BT 模式和混合模式，会进行 hash 值校验文件的完整性</td></tr>
<tr><td><b>目录传输</b></td><td>用户可以将指定目录传输到一批机器的指定可写目录下，目录传输将保持目录的结构和权限不变。</td></tr>
<tr><td><b>正则匹配传输</b></td><td>用户可以通过通配符（符合通用正则表达式）匹配一批文件，并传输到指定机器的指定可写目录，传输完成后文件的格式和权限与源文件保持一致。</td></tr>
</tbody></table>

## 传输控制

<table><tbody>
<tr><th width="30%">传输控制</th><th width="75%">详情</th></tr>
<tr><td><b>区域链控制</b></td><td>让文件沿着指定的路径，通过多个中转节点的接力，最终到达目标机器，并且源文件和目标文件所在机器不在同一个物理或逻辑区域，我们称这种传输方式为<b>区域链传输</b>。<br>区域链控制是指通过一定规则指定文件中转的路径，以满足具有特殊专线链接的两个区域间的传输需求。</td></tr>
<tr><td><b>跨区域穿透</b></td><td>跨区域穿透是指原本相互隔离的两个区域，由于特殊目的，需要就本次传输进行定向透传。<br>蓝鲸管控平台允许权限用户适当修改配置来完成这种定向穿透。</td></tr>
</tbody></table>

## 传输限速

考虑到企业内部网络负载情况，BK Agent 会设置默认的传输速度限制，

如果发现限速不合适，可以通过修改 BK Agent 配置来调整速度配置以便达到最佳的传输效果（具体参考部署文档）。
