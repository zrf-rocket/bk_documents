## 版本日志
### 版本整体
- consul 1.7.9
- consul-template 0.25.1
- docker 18.09.9
- elasticsearch 7.6.1
- influxdb 1.7.10
- kafka 0.10.2.0
- mysql 5.7.29
- redis 5.0.9
- zookeeper 3.4.14
- rabbitmq 3.8.3
- openresty 1.15.8.3 
- mongodb 4.2.3 

### 部署脚本

#### 安全更新

- 蓝鲸后台模块除 gse 外，均使用 blueking，低权限账号启动，不再使用 root 账号
- 开源组件使用 rpm 包安装，且创建相应低权限账号运行，不再使用 root 账号
- Redis Sentinel 模式下，增加密码认证
- zookeeper 默认启动参数禁用 jmx 的远程访问
- influxdb 默认增加密码认证
- nginx 的 ssl_protocols 配置调整只支持 TLSv1.2 TLSv1.3 协议

#### 蓝鲸产品部署调整

- 【新增】 蓝鲸后台模块除 gse 外，均使用 blueking 账户启动，systemd 托管。
- 【新增】 新增`release_*.sh` 脚本用于单独更新蓝鲸组件包
- 【新增】 新增`health_check/check_*.sh`脚本用于检查蓝鲸的服务状态
- 【变更】 蓝鲸配置渲染方式重构，模板占位符统一`BK_`前缀避免潜在和开源软件的变量冲突的可能
- 【变更】 Python 工程均使用蓝鲸加密 python 解释器部署，保护源码
- 【变更】 Consul 健康检查从脚本判断进程调整为 TCP 检测端口存活
- 【变更】 删除原来脚本框架的不再使用的脚本
- 【变更】 安装部署蓝鲸组件的脚本剥离为独立的`install_*.sh`脚本
- 【变更】 切换 confd 生成 nginx 配置为 consul-template 来动态生成 nginx 配置
- 【变更】 使用 openresty 来代替 nginx 作为 web 接入层
- 【变更】 进程守护使用 systemd，不再添加 crontab 的进程检查脚本
- 【优化】 使用 pssh 套件代替串行执行 ssh 命令执行远程命令
- 【优化】 部署前初始化蓝鲸安装主机，并对每个节点做基础检查
- 【部署】 pip 包安装统一为离线本地 pip 源安装方式

### 权限中心（iam + bk_iam_app）

- 【新增】系统接入权限中心 API
- 【新增】针对个人的授权/回收权限 API
- 【新增】用户申请权限，包括加入用户组、自定义权限申请
- 【新增】我的权限展示，包括自定义权限、加入的用户组
- 【新增】我的申请，个人申请过的所有单据
- 【新增】我的审批，个人审批的所有待审批、已审批单据
- 【新增】权限模板，包括权限模板的增删改查，以及权限模板关联用户组
- 【新增】通过组织架构管理用户或者组织的权限
- 【新增】用户组，包括用户组的增删改查，以及添加人员、添加权限能力
- 【新增】依赖操作，用户申请勾选了某个操作，权限中心会自动将相关依赖操作一并申请
- 【新增】新建关联操作，用户新建某个资源，会自动授予该资源相关的所有操作权限
- 【新增】拓扑选择实例，支持通过拓扑来选择具体实例
- 【新增】属性选择实例，支持通过属性来动态选择实例
- 【新增】操作分组，支持系统注册操作时按照分类展示
- 【新增】 支持用户登出功能
- 【新增】 产品文档链接

### 用户管理（usermgr  + bk_user_manage )

- 【新增】企业版 3.0 正式接入权限中心
- 【新增】支持多用户目录及认证
- 【新增】本地用户目录新
- 【新增】支持 OpenLDAP 目录对接
- 【新增】支持 Microsoft Active Directory 目录对接
- 【新增】组织架构树管理
- 【新增】支持自定义字段
- 【新增】支持操作审计
- 【新增】支持自定义字段唯一性校验
- 【新增】增加自定义目录支持

### PaaS 平台（open_paas）

- 【新增】对接权限中心 3.0
- 【新增】后台支持 oauth2 登录模式接入
- 【新增】开发者中心日志采集及查看支持 Elasticsearch 7.0
- 【新增】SaaS 部署方式优化为在 docker 内运行
- 【新增】个人信息独立页面
- 【更新】ESB 更新 cc、iam 等的 confapis
- 【更新】ESB 更新 cc delete_cloud_area use POST method
- 【更新】ESB 更新 bcs apigw-bcs-app.yaml
- 【优化】社区版首页样式优化
- 【优化】将权限体系的接入模式切换为 iam-python-sdk，目前是 1.0.4 支持缓存
- 【修复】移除 i18n trans from login
- 【修复】开发者中心部分前端展示缺陷
- 【修复】ESB 修复 sops 的文档展示内容
- 【修复】 获取 app list error when app is only link



### 配置平台（cmdb）

- 【新增】全文检索功能
- 【新增】服务模板支持对服务进行标准化管理
- 【新增】服务分类对服务进行归类梳理
- 【新增】业务集群模版功能
- 【新增】运营统计功能
- 【新增】业务自定义字段功能
- 【新增】主机属性自动应用功能
- 【新增】模型的用户字段类型
- 【新增】模型的部门组织字段类型
- 【新增】业务对象的事件监听功能
- 【新增】云主机资源同步功能
- 【新增】云账户管理功能
- 【新增】云区域管理功能
- 【优化】操作审计功能
- 【优化】首页支持固资编号查询主机
- 【优化】权限对接到蓝鲸权限中心 3.0
- 【优化】系统结构为：业务、资源、模型、运营统计四大板块
- 【优化】业务拓扑功能，整合了业务主机和服务拓扑
- 【优化】主机转移功能，拆分为业务模块、空闲模块、资源池三个子功能
- 【优化】实例详情页交互


### 管控平台（gse）
- 【新增】procmgr 增加支持通过 zk 服务发现 taskserver 节点
- 【新增】agent 进程管理模块合入进程资源分组功能
- 【优化】procmgr 和 syncdata 服务调整 cmdb 的主机查询新接口(list_hosts_without_biz)
- 【优化】gse server 采用 systemd 部署，安装包的 bin 目录移除 gsectl 脚本
- 【优化】gsectl 脚本按 gse agent, gse proxy 调整为 2 个 gsectl 脚本
- 【优化】gsectl.bat 脚本优化启动问题
- 【优化】移除 gse_opts, gse_ops 配置模板文件
- 【优化】gse_task, gse_file 增加 thrift 库异常捕获，加强异常保护
- 【优化】gse_agent proxy 模式时，加强上行消息的可靠性
- 【修复】gse_file 修复日志格式化变量类型错误
- 【修复】gse_procmgr 修复同步多内网 IP 的主机进程状态查询问题
- 【修复】gse_syncdata 修复同步多内网 IP
- 【修复】gse_syncdata 修复处理 cmdb 返回空 IP 的异常
- 【修复】gse_procmgr 修复处理 cmdb 返回空 IP 的异常

### 作业平台（job）

- 【新增】分析模块：周期检测业务的关键配置状态（如定时任务失败、配置主机为空等等）
- 【新增】文件分发支持配速+超时，新增两种分发模式
- 【新增】平台管理功能（如通知模板、账号命名规则、平台信息等）
- 【新增】支持高危语句配置和提醒
- 【新增】支持 Redis Sentinel 密码验证
- 【新增】顶部导航新增「产品文档」和「问题反馈」的入口
- 【优化】全新的视觉交互设计
- 【优化】对接新版权限中心 V3
- 【优化】消息通知支持配置指定通知人&角色
- 【优化】作业调整为“作业模板+执行方案”
- 【优化】作业全局变量增加 `密文` 类型
- 【优化】作业的文件分发步骤中路径信息支持填写全局变量
- 【优化】步骤的 `完成后暂停` 调整为 `人工确认` 步骤
- 【优化】账号的授权配置移除
- 【优化】定时任务取消秒级设置、周期配置采用类 Linux 表达式
- 【优化】定时任务支持 `单次执行` 模式
- 【优化】定时任务支持配置启动前和启动后的消息通知
- 【优化】任务详情中支持查询操作记录和重试前的执行快照
- 【优化】支持下载单台目标服务器的执行日志
- 【优化】失败步骤支持 `全部重试`
- 【优化】脚本的版本支持设置/管理状态
- 【优化】整体国际化优化


### 监控平台（bkmonitor + bk_monitor）

- 【新增】 对接权限中心 3.0
- 【新增】 新仪表盘
- 【新增】 插件制作,采集任务,可通过 scirpt Prometheus(exporter) Datadog(agent) JMX 等方式采集数据
- 【新增】 告警组,策略配置支持 8 种检测算法,不同维度的汇聚计算,告警收敛,无数据告警等
- 【新增】 批量导出导入
- 【新增】 自定义指标/事件上报(HTTP SDK 命令行)
- 【新增】 日志关键字事件
- 【新增】 支持 ICMP 拨测
- 【新增】 全局设置
- 【新增】 国际化
- 【新增】 数据检索
- 【新增】 告警事件移动端
- 【新增】 exceptionbeat ,bkmonitorproxy 采集器
- 【新增】 采集目标支持服务实例
- 【新增】 通知方式支持 企业微信群, HTTP 回调,消息队列
- 【新增】 事件导出功能
- 【新增】 目标选择器优化，支持服务模版和集群模版
- 【优化】 主机监控全新交互
- 【优化】 服务拨测全新交互
- 【优化】 事件中心全新交互和性能优化
- 【优化】 前后端分离
- 【优化】 告警事件生成和通知优化,通知模版
- 【优化】 basereport,processbeat,bkmonitorbeat 采集指标和性能
- 【优化】 目标选择器支持集群和服务模版
- 【优化】 日志关键字支持高级算法
- 【修复】 事件中心数据统计问题
- 【修复】 采集下发的日志路径去除前后空格后提交
- 【修复】 修复拓扑目标查询主机数量不正确问题

### 故障自愈（fta + bk_fta_solutions）

- 【新增】 对接监控平台 3.2
- 【新增】 处理套餐增加 ITSM 创建单据
- 【新增】 故障自愈替换配置文件的环境变量名称
- 【优化】 修改自愈帮助的状态请求接口为 BK_PAAS_INNER_HOST
- 【优化】 作业平台仅支持全局变量传参数，需配合后台>=5.2.5, SaaS>=5.2.8
- 【优化】 替换调人员选择器
- 【优化】 快捷套餐的使用替换
- 【优化】 蓝鲸监控 3 改名为蓝鲸监控平台
- 【优化】 蓝鲸监控 3.2 的告警策略刷新业务运维可以操作
- 【优化】 超级管理员可以操作所有的业务内容
- 【优化】 API 错误信息页面展示接口错误日志
- 【优化】 去掉 search_host 接口的使用
- 【优化】 超级管理员权限扩充,自愈的超级管理员自行修改
- 【优化】 修改所有快捷套餐的执行方式（转移故障机，作业执行等)
- 【优化】默认开启监控 V3
- 【优化】修改蓝鲸监控的 Logo
- 【优化】修改配置平台的跳转链接为业务页面

### 节点管理（bk_nodeman）

- 【新增】全新的 UI
- 【新增】支持多业务、多云区域操作 Agent 和插件
- 【新增】新增接入点配置，支持管理不同 GSE SERVER、下载地址等
- 【优化】更细致的任务历史及执行日志
- 【优化】提高 AGENT 安装并发数
- 【优化】提高 AGENT 安装成功率
- 【优化】提供更可靠的 Agent 安装脚本

### 标准运维（bk_sops）

- 【新增】统一接入权限中心 V3  
- 【新增】画布交互优化，快速复制，键盘快捷键等丰富功能
- 【新增】支持查看节点执行日志
- 【新增】流程支持打回功能
- 【新增】流程判断支持更多 python 语法，如 datetime, re, hashlib, random
- 【优化】变量类型从 9 个增加到 16 个
- 【修复】产品文档跳转链接问题
- 【修复】页面 footer 没有蓝鲸云桌面选项问题

### 日志平台（bk_log_search）

- 【新增】 第三方 ES 接入
- 【新增】 日志采集和字段提取功能
- 【新增】 trace 日志展示
- 【新增】 日志仪表盘
- 【新增】 接入权限中心
- 【新增】 日志采集器 bkunifylogbeat
- 【新增】 demo 功能
- 【新增】 日志检索汇聚功能
- 【新增】 日志检索收藏，历史等功能
- 【优化】登录态失效使用弹窗方式跳转到 PaaS 登录界面

### 流程服务

- 【新增】前端组件升级
- 【新增】节点支持配置动态处理人
- 【新增】节点字段支持关联约束
- 【新增】任务模板配置管理
- 【新增】流程内支持任务组功能
- 【新增】触发器配置管理
- 【新增】流程中支持触发器功能
- 【新增】支持流程管理员及负责人的配置管理
- 【新增】API 支持编写沙箱代码
- 【新增】流程内的公共变量扩展
- 【新增】系统功能开关丰富
- 【新增】提供快速提单入口
- 【修复】修复富文本打包缺陷
- 【新增】SLA 管理模块
- 【新增】基础模型和公共字段
- 【新增】服务目录排序
- 【新增】单选人员选择器组件
- 【新增】通知模板开放配置
- 【新增】母子单功能
- 【新增】权限中心 V3 接入
- 【新增】新增字段默认值添加富文本
- 【新增】api 节点失败处理（重试，忽略）
- 【新增】关注人按钮，关注人列表
- 【新增】新增批量审批
- 【新增】富文本内的链接支持新标签中打开
- 【新增】审批节点
- 【新增】顶部导航统一规范
- 【新增】文档跳转
- 【优化】升级开发框架
- 【优化】升级到 Python3
- 【优化】全局视图表格优化，添加处理人，筛选条件，自定义表头等
- 【优化】时间控件默认显示当前时间
- 【优化】后台管理菜单 icon 替换
- 【优化】处理人组件改为失焦时显示一行，聚焦时显示多行
- 【优化】如果会签节点或审批节点状态为处理中，则提交按钮显示 loading
- 【优化】调整标准运维任务重试和创建的逻辑
- 【优化】快速提单跳转到全局视图我的申请单
- 【优化】审批条件参数优化
- 【优化】工单列表和工单详情样式优化
- 【优化】magicbox 升级到 2.2.1
- 【优化】节点详情和日志详情样式优化
- 【优化】pass 平台申请权限会在新浏览器标签中打开

## 版本信息

| 后台模块    | 版本    |
| ----------- | ------- |
| bkiam       | 1.4.9   |
| bklog       | 4.2.443 |
| bkmonitorv3 | 3.3.951 |
| bknodeman   | 2.0.631 |
| bkssm       | 1.0.8   |
| cmdb        | 3.9.11  |
| fta         | 5.2.7   |
| gse         | 3.5.13  |
| job         | 3.1.2.5 |
| license     | 3.1.5   |
| open_paas   | 2.11.61 |
| paas_agent  | 3.2.2   |
| usermgr     | 2.2.1   |

| SaaS             | 版本       |
| ---------------- | ---------- |
| bk_iam           | 1.1.45     |
| bk_nodeman       | 2.0.1220   |
| bk_log_search    | 4.2.443    |
| bk_sops          | 3.6.14.222 |
| bk_monitorv3     | 3.3.1434   |
| bk_itsm          | 2.5.5.199  |
| bk_fta_solutions | 5.2.12     |
| bk_user_manage   | 2.2.0      |

| 采集器         | 版本    |
| -------------- | ------- |
| basereport     | 10.7.32 |
| processbeat    | 1.11.34 |
| exceptionbeat  | 1.1.14  |
| bkmonitorbeat  | 1.10.43 |
| bkmonitorproxy | 1.1.26  |
| bkunifylogbeat | 7.1.32  |
| pluginscripts  | 1.0.1   |
| gsecmdline     | 2.0.3   |