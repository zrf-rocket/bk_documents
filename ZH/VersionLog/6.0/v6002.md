## 版本日志

### 部署脚本
- 【新增】部署前支持自定义 BK_DOMAIN 和安装目录
- 【修复】pip 安装离线包的问题
- 【修复】安装 consul 时用户 /etc/resolv.conf 为空的问题
- 【修复】uninstall.sh 脚本卸载不完全的问题

### PaaS 平台

- 【修复】ESB 中文邮件附件支持 unicode
- 【新增】新增 JOBV3 组件 API
- 【更新】开发者中心-新手指南 中更新 “开发框架” 版本
- 【修复】ESB send_sms 组件支持配置腾讯云短信签名
- 【修复】错误页面 css/png 404 问题

### 用户管理

- 【优化】 best_match 用于模糊搜索时最短匹配
- 【新增】 社区版数据迁移脚本
- 【新增】 since/until 支持通过创建/更新时间过滤搜

### 权限中心

- 【修复】 修复搜索拓扑实例缓存错误问题

### 监控平台

- 【新增】事件中心-支持日志关键字图表
- 【新增】数据检索-查询支持目标过滤
- 【新增】新增图表和时间联动功能
- 【新增】监控图表支持水印配置
- 【新增】告警策略-辅助视图
- 【新增】系统事件-新增监控条件
- 【新增】采集配置-列表增加更新记录
- 【新增】屏蔽策略-屏蔽时间支持跨天选择
- 【新增】告警策略-新增/编辑-告警时间段新增支持跨天选择功能
- 【新增】告警组-告警组人员选择器新增粘贴批量输入功能
- 【优化】优化 loading 样式
- 【优化】优化策略视图逻辑
- 【优化】策略列表-策略列表优化
- 【优化】自定义指标-详情优化
- 【优化】采集配置列表页适配不存在实例数量的缓存信息的情况
- 【修复】进程监控-修复进程名多了 0 的问题
- 【修复】事件详情-修复告警触发描述不准确的问题: xx 周期内满足 yy 次检测算法
- 【修复】服务拨测-修复异常 lang cookie 导致的显示问题及放开拨测任务超时设置最小值为 0
- 【修复】日志监控-修复日志平台查询时序数据统计不准确的问题
- 【修复】策略详情-修复 icon 悬浮样式问题
- 【修复】视图-折线图阈值区域问题
- 【修复】日志关键字-策略详情解析 metric_field 问题导致回填失败
- 【修复】导出导入-策略导出报错问题
- 【修复】服务拨测-任务超时设置限制最小值大于 0
- 【修复】 检查视图-修复滚动条异常出现
- 【修复】检查视图-修复缓存页面再次请求接口问题
- 【修复】检查视图-修复页面缓存导致图表组件变量不恢复默认问题
- 【修复】策略列表-数据兼容处理, 预防无数据报错
- 【修复】自定义指标-自定义指标检查视图指标列表
- 【修复】更新跳转节点管理路由
- 【修复】采集检查视图-修正服务实例名展示
- 【修复】采集检查视图-修复采集检查视图对比功能

### 故障自愈
- 【修复】支持中文匹配

### ITSM
- 【修复】SOPS 交互地址改为内部地址
- 【修复】会签处理完成未正常流转的问题
### 标准运维
- 【修复】 权限中心拉取资源默认链接为 BK_PAAS_INNER_HOST

### 管控平台
- 【新增】gse_task 配置模块增加配置项 prometheus_http_svr_ip

### 作业平台
- 【新增】 顶部导航增加  `产品文档`  和  `问题反馈`  的入口
- 【新增】 执行历史页面现在可以通过  `执行IP`  字段进行搜索了(由于任务数据量巨大，所以当前仅支持精确匹配)
- 【新增】 作业模板查看页增加  `同步方案`  入口，进一步缩短编辑模板后批量同步的操作路径
- 【新增】 增加了新业务/无权限业务的功能指引页面，助力新业务更快上手
- 【新增】 定时任务现在可以查看  `启动失败`  的任务记录了，并且会计入  `周期成功率`  的计算
- 【新增】 增加  `主机列表`  类型变量的获取能力
- 【新增】 增加在脚本中获取上一步执行结果的主机列表能力
- 【新增】  `执行账号`  的鉴权对接了权限中心，操作名为  `执行账号使用` 
- 【新增】 第三方系统引用执行方案详情页的固定链接： `{域名}/api_plan/${planId}` 
- 【优化】 定时任务的  `周期成功率`  增加了注释 tooltips
- 【优化】 脚本查看页补充了基础信息，鼠标悬浮可以 "即看即改"
- 【优化】 搜索框交互体验进一步优化：现在支持人员名称补全、已填条件点击可编辑
- 【优化】 定时任务的  `周期成功率`  一栏改为异步加载方式，避免影响列表的加载速度体验
- 【优化】 现在编辑完作业模板保存后，可以在提示窗中的  `同步方案`  直接进入批量同步执行方案了
- 【优化】 IP 选择器如果没有选择 "静态 IP"，复制按钮将自动禁用
- 【优化】 定时任务的鉴权逻辑优化
> 
**更新前的鉴权逻辑：**
定时任务启动后，每次调度执行时都会进行鉴权，如果鉴权不通过将会停止运行
**更新后的鉴权逻辑：**
一旦定时任务被鉴权通过并启动后，每次调度时间触发任务都不会再重复进行鉴权
**对于本次改动的思考：**
人员的变动与业务并不是强依赖的关系（简单说就是“业务”并不会因为负责的运维人员岗位变动了，而随之改变归属），定时任务是用户在作业平台对业务场景需求进行的定时调度配置，如果因为配置人的岗位调动后没有了执行权限，而导致原本调度执行的任务停滞了影响业务逻辑，是不合理的。

- 【优化】 新建和编辑作业模板提交后的提示框指引交互优化
- 【优化】  `脚本执行`  的步骤类型 icon 更新，增强不同类型的辨识度
- 【优化】 消息通知的  `重置`  按钮逻辑优化，可以还原页面未保存前的配置
- 【优化】 作业模板入口进去的执行方案列表页与  `执行方案`  总页的交互保持一致
- 【优化】 执行日志的搜索现在切换命中的目标后会自动锚点到匹配的日志区域了
- 【优化】 作业的配置中，使用了被删除的拓扑节点或动态分组现在也会标识出来了
- 【优化】 优化扩大了文件分发的源文件引用主机的弹窗点击触发区域
- 【优化】 现在步骤执行详情页中的作业流程缩略图可以看未执行步骤的基础信息了
- 【修复】 解决了定时任务的作业执行方案因存在  `无效主机`  导致无法正常启动的问题
- 【修复】 修复执行结果详情页的  `复制`  按钮因后台分页无法全部复制的问题
- 【修复】 解决 IP 选择器的搜索因数据分页而没有正确命中的问题
- 【修复】 从「执行方案」页面的  `新建`  进入后会导致整个页面无响应的问题
- 【修复】 执行结果详情页的 TAB 分组名因字符过长没有显示 tooltips 的问题
- 【修复】 解决脚本编辑框被垂直滚动条遮挡住脚本内容的问题
- 【修复】 解决  `无效`  的主机或节点无法被正常移除的问题
- 【修复】 解决了脚本执行的超时时长设置为 0，实际生效的是 1000s 的问题
- 【修复】 解决在执行详情页搜索后，对匹配的主机进行复制还是全量列表的问题
- 【修复】 解决定时任务对表达式解析后的  `下次`  时间不对的问题
- 【修复】 在极端情况下 IP 选择器对已勾选的目标失效的问题
- 【修复】 解决通过动态拓扑节点申请权限时的跳转错误问题
- 【修复】 修复从作业模板生成执行方案时， `密文`  变量值没有附带过去的问题

## 版本信息

| 后台模块    | 6.0.1 版本    | 6.0.2 版本|
| :----------- | :-------: | :-------: |
| bkiam       | 1.4.9  |-|
| bklog       | 4.2.475 |-|
| bkmonitorv3 |3.3.969|3.3.993|
| bknodeman   | 2.0.646 |-|
| bkssm       | 1.0.8   |-|
| cmdb        | 3.9.11  |-|
| fta         | 5.2.7   |5.2.9|
| gse         | 3.5.13  |3.5.14|
| job         | 3.1.2.8 |3.1.4.0|
| license     | 3.1.5   |-|
| open_paas   | 2.11.64|2.11.68|
| paas_agent  | 3.2.2 |-|
| usermgr     | 2.2.1   |2.2.2|

| SaaS             | 6.0.1 版本       | 6.0.2 版本     |
| :---------------- | :----------: | :----------: |
| bk_iam           | 1.1.45  |1.1.46|
| bk_nodeman       | 2.0.1245|-|
| bk_log_search    | 4.2.475|-|
| bk_sops          | 3.6.14.222 |3.6.14.235|
| bk_monitorv3     | 3.3.1449 |3.3.1474|
| bk_itsm          | 2.5.5.215|2.5.5.240|
| bk_fta_solutions |5.2.13|-|
| bk_user_manage   |2.2.1|-|

| 采集器         | 6.0.1 版本    | 6.0.2 版本     |
| :------- | :-------: |:--------:|
| basereport     | 10.7.32 |-|
| processbeat    | 1.11.34 |-|
| exceptionbeat  | 1.1.14  |-|
| bkmonitorbeat  | 1.10.43 |-|
| bkmonitorproxy | 1.1.26  |-|
| bkunifylogbeat | 7.1.32  |-|
| pluginscripts  | 1.0.1   |-|
| gsecmdline     | 2.0.3   |-|