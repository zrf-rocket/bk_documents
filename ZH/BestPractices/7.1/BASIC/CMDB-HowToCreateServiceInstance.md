>蓝鲸配置平台中的服务实例是由主机+进程+端口组成的最小的服务单元，可以通过服务模板或者直接在主机上来添加进程实现。


## 理解服务实例
 - ### 进程和端口1对1
	
	【单机单实例】比如mysql服务，进程mysqld只绑定一个端口3306，那么主机 *1.1.1.1+mysqld+3306* 就是一个服务实例，*2.2.2.2+mysqld+3306* 是另一个实例；
	
	【单机多实例】如果一台主机要起多个mysql服务，那端口需要不一样，比如 *1.1.1.1+mysqld+3306* 和 *1.1.1.1+mysqld+3307* 分别是不同的一个实例
	
- ### 进程和端口1对多

  比如Nginx，开启了https认证，对外提供服务时会同时监听80和443，那么主机 *1.1.1.1+nginxd+80+443* 是一个服务实例，*2.2.2.2+nginxd+80+443* 是另一个实例。单机多实例同上。

## 实操演示

例：以服务模板为例，websvr模块部署的apache，进程名是httpd，监听端口80、443

### 1、添加进程

![image.png](https://smartpublic-10032816.file.myqcloud.com/custom/20230511112947/20044/20230511112947/--9ba660d5262689ce87d1902a411f46ad.png)

![image.png](https://smartpublic-10032816.file.myqcloud.com/custom/20230511112954/20044/20230511112954/--70000b0cd8032d284f1be445ceaf20ca.png)

### 2、添加主机

模块下没有主机时，是不存在服务实例的

![image.png](https://smartpublic-10032816.file.myqcloud.com/custom/20230511113010/20044/20230511113010/--debfe4b23f721b06d484f07132916a39.png)

从空闲模块转一台机器到广东一区的websvr模块下

![image.png](https://smartpublic-10032816.file.myqcloud.com/custom/20230511113026/20044/20230511113026/--930c521b68536c8b4803564db3ca5842.png)

提示会新增服务实例

![image.png](https://smartpublic-10032816.file.myqcloud.com/custom/20230511113048/20044/20230511113048/--975b3e212737b9a8b30b327f611b3641.png)

![image.png](https://smartpublic-10032816.file.myqcloud.com/custom/20230511113056/20044/20230511113056/--2949b80c37d7a9c491d998cfebd512f4.png)

编辑服务实例时会发现无法编辑，因为在服务模板添加进程时加了锁。

![image.png](https://smartpublic-10032816.file.myqcloud.com/custom/20230511113109/20044/20230511113109/--873a8c398985b93acb1457ba55b6bf29.png)

> 最后，需要说明的是：通过服务模板添加服务进程，是模块下主机都提供相同服务的最佳实践场景，可以通过服务模板批量管理模块下主机的服务实例；如果一些模块下的主机不需要提供相同的服务，比如内部开发测试机，可以放在直接创建的集群模块下，针对单个主机添加不同的服务实例。

 ![企业微信截图_16844144573304.png](https://smartpublic-10032816.file.myqcloud.com/custom/20230518210435/9189/20230518210435/--3bac2e106f07660ac9f3b43c041aa910.png)

​                            （直接创建的模块下针对不同的主机添加各自的服务实例)