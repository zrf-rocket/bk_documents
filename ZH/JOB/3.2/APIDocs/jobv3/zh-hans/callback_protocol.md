
### 请求方法

POST


### 请求地址

/api/c/compapi/v2/jobv3/callback_protocol/


### 通用参数

| 字段 | 类型 | 必选 |  描述 |
|-----------|------------|--------|------------|
| bk_app_code  |  string    | 是 | 应用ID     |
| bk_app_secret|  string    | 是 | 安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -> 点击应用ID -> 基本信息 获取 |
| bk_token     |  string    | 否 | 当前用户登录态，bk_token与bk_username必须一个有效，bk_token可以通过Cookie获取 |
| bk_username  |  string    | 否 | 当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户 |


### 功能描述

此组件仅用于展示回调协议文档。

对作业执行类的请求传入的回调 callback_url 地址进行回调时所传递的报文结构描述。

### 请求参数

| 字段   |  类型      | 必选   |  描述      |
|-----------------|------------|--------|------------|
| job_instance_id | long   | 是     | 作业实例ID |
| status          | int    | 是     | 作业状态码: 1.等待执行; 2.正在执行; 3.执行成功; 4.执行失败; 5.跳过; 6.忽略错误; 7.等待用户; 8.强制终止; 9.状态异常; 10.强制终止中; 11.强制终止成功,13.确认终止 |
| step_instance_list | array     | 是     | 步骤块中包含的各个步骤执行状态 |

#### step_instances

| 字段   |  类型      | 必选   |  描述      |
|-----------------|------------|--------|------------|
| step_instance_id | long   | 是     | 作业步骤实例ID |
| status           | int    | 是     | 作业步骤状态码: 1.等待执行; 2.正在执行; 3.执行成功; 4.执行失败; 5.跳过; 6.忽略错误; 7.等待用户; 8.强制终止; 9.状态异常; 10.强制终止中; 11.强制终止成功,13.确认终止 |

### 请求参数示例

```json
{
    "job_instance_id": 12345,
    "status": 2,
    "step_instance_list": [
        {
            "step_instance_id": 16271,
            "status": 3
        },
        {
            "step_instance_id": 16272,
            "status": 2
        }
    ]
}
```

### 回调响应

回调成功以HTTP状态为准，如果成功，则状态码200，其他表示失败，Job会对失败的做一次重试，如还失败，则忽略失败，不再回调。