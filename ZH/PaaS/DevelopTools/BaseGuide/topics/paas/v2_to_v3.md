# 从 PaaS2.0 到 PaaS3.0 你不得不注意的一些事项

## 新版开发者中心有哪些使用上的变化

### App 启动方式

对于 PaaS2.0 的开发者中心，所有 App 是固定以 uwsgi 启动。这种方式带来了几个弊端：
- 启动方式并不灵活。例如，某些需求高性能的 App 更适合使用 gunicorn
- 只能支持 Celery 作为附属进程，面对个性化的需求束手无策。

因此，PaaS3.0 采用了 Procfile 的方式，赋予了用户 自定义进程类型 和 自定义进程启动方式 的能力。如果你还想更多的了解 Procfile 以及相关内容，请阅读 [应用进程与 Procfile](./process_procfile.md)

### 访问 URL

新版 App 使用了全新的访问 URL,不同的 App 以不同 Path 区分，拼接规则：

```bash
{主域}/{应用版本}-bkapp-{应用code}-{应用环境}/
```

举例来说，一个 code 为 example 的 Tencent 版 App 访问路径：

```bash
# 预发布环境
apps.bking.com/stag--example/
# 生产环境
apps.bking.com/prod--example/
```

对于生产环境，默认会跳转到蓝鲸桌面，所以对外宣传链接保持不变。

### 数据库 migrate

PaaS3.0 开发者中心将数据库的 migrate 操作是通过 [部署前置命令](./release_hooks.md) 实现的，你可以自己决定每次部署是否执行该操作。

### RabbitMQ 等服务使用

和旧版不同，PaaS3.0 开发者中心提供了可插拔的多中增强服务，包括了 RabbitMQ、对象存储 等等，如果需要使用 Celery 做后台任务的应用，需要手动在增强服务里启用 RabbitMQ。

值得注意的是，启用默认只是添加了绑定关系，真实的资源会在对应环境的部署中申请。

## 有关 PaaS3.0 FAQ

### 相较于老版，新版有什么优势

- 全新设计的用户界面，给您更友好的体验
- 支持使用 NodeJS 等语言开发应用
- 支持自定义后台进程及启动命令
- 支持在线一键迁移应用到新版开发者中心
- 全面升级的应用开发框架

### 我有很多老版 App，如何迁移呢

PaaS3.0 后续将提供【一键迁移】功能，能够快速地一键迁移老版 App，并支持随时回滚。

### 迁移是否有风险呢

没有。在选择“确认迁移”之前不会对旧服务有任何影响，所以请在【完全】验证新版功能后，再选择“确认迁移”。


### 是否支持 外部 DB

支持。需要在 “模块管理-出口 IP 管理” 开启使用外部 DB 的环境，并对列表中的 IP 授权，在保持开关状态开启的情况，应用只会调度到列表中的机器。

### 是否支持可视化操作 MySQL

不支持。建议使用 Django Admin，在保证安全的情况下，能够满足大部分 DB 操作需求。
