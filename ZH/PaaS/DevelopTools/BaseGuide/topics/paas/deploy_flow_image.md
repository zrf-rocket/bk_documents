# 提供（容器）镜像的应用的部署流程

蓝鲸 PaaS 平台目前不提供镜像构建功能, 需要由用户在**本地**或**流水线**构建镜像并推送至 Docker Registry 后, 才能进行部署操作。   
同时, 由于镜像交付与源码交付不同, 平台无法从镜像中解析出应用进程与启动命令, 因此在首次部署前仍需要在蓝鲸 PaaS 平台配置`启动命令`.

## 配置「启动命令」

在平台的「部署管理」-「部署配置」页面中可配置「启动命令」。

启动命令的配置规则与普通应用的 [应用进程与Procfile](../../topics/paas/process_procfile.md) 一致, 在用户点击部署后, 蓝鲸 PaaS 平台将根据用户配置的启动命令, 启动容器。

## 其他资料

### 容器启动的原理以及镜像的限制
众所周知, 启动容器需要提供 `entrypoint` 和 `cmd`, 但在配置「启动命令」时缺未区分该两项配置, 那么蓝鲸 PaaS 平台是如何解决容器启动的问题，帮助用户屏蔽底层实现的差异性呢？   
事实上, 蓝鲸 PaaS 在启动容器时是统一将 `entrypoint` 设置成了 `env`, 用户配置的 `启动命令` 则被设置为 `cmd`。   

> 我们假设用户配置的启动命令是 `gunicorn wsgi -w 4 -b :$PORT `, 那么实际上容器中执行的进程将是:
> 
```bash
env gunicorn wsgi -w 4 -b :$PORT
```

得益于 `env` 指令的特殊性, 蓝鲸 PaaS 平台简化了用户使用镜像的成本，但这意味着蓝鲸 PaaS 平台支持的镜像有一个限制, 那就是必须具有 `env` 这个可执行程序, 如果用户的镜像无法正常启动, 请联系管理员协助排查。

你还可以参考：[部署(Release)阶段钩子](../../topics/paas/release_hooks.md)