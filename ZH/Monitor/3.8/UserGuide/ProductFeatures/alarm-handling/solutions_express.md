# 快捷处理套餐

## 套餐的类型

故障自愈套餐主要有三类套餐： **快捷套餐**、**内置的套餐**、**周边系统套餐**。

* 快捷套餐： 用户不需要做任何设置就可以直接使用。其他套餐都是需要用户进行配置的。 
* 内置的套餐： 主要是指告警通知和告警回调两种，这两种的执行动作是平台自身保证的逻辑。
* 周边系统套餐：指作业平台、标准运维、ITSM等，周边系统服务提供的能力。 

## 快捷套餐列表

### 【快捷】磁盘清理(适用于Linux)

依赖： 标准运维

应用范围： 适用于Linux

简介： 主要是用来清理磁盘空间。


#### 【快捷】发送 CPU 使用率 TOP10 的进程

依赖： 标准运维和通知渠道

应用范围： 适用于Linux

简介： 获取目标服务器的CPU使用率TOP10的进程列表


#### 【快捷】发送 MEM 使用率 TOP10 的进程

依赖： 标准运维和通知渠道

应用范围： 适用于Linux

简介： 获取目标服务器的CPU使用率TOP10的进程列表


#### 【快捷】CMDB 移到“故障机”模块

调用蓝鲸配置平台的接口，将故障机移动至当前业务的故障机模块。

依赖： CMDB

简介： 获取目标服务器的CPU使用率TOP10的进程列表


### 组合套餐中的快捷套餐

该分类下套餐仅能在组合套餐中使用。

#### 【快捷】配置平台拷贝故障机属性到备机

> (需先调用 获取故障机备机 套餐)

- 具体操作：

    - 调用配置平台替换接口，将替换机转移到与故障机相同的模块下(包括属于故障机多个模块的情况)。

    - 拷贝故障机的标准属性、自定义属性到替换机。

- 使用场景：故障机切换后拷贝故障机 CC 信息到备机；


#### 【快捷】后续处理对象故障机与备机互换

> (需先调用 获取故障机备机 套餐)

- 具体操作：
调用此套餐后，在组合套餐的后续流程中，操作对象将会替换。流程默认都是对故障机进行操作，调用一次后将会默认对备机进行操作。再调用一次，则恢复原状。

- 使用场景：
例如当获取选定的备机后，想对备机进行初始化操作，那么这时候就要先调用一次此套餐，再调用初始化。初始化后，又想把故障机移动到配置平台的故障机模块，那么就又要调用一次此套餐，然后再调用配置平台移动模块。



## 组合套餐类

### 组合套餐

组合套餐，顾名思义就是把该业务下的套餐和官方通用套餐组合起来使用。

- 具体操作：按照配置的流程顺序执行套餐。

- 使用场景：当单一的套餐无法满足故障恢复流程时，将套餐串起来用。

### 获取故障机备机

根据配置平台的配置属性获取备机许多故障替换操作都依赖于此套餐。

除了通过这个套餐获取备机外，也可以通过作业平台来获取备机，只要使用作业平台套餐获取变量为 ip_bak 的参数即可。

- 具体操作：根据配置，在配置平台指定的 Set 与 AppModule 中，查找指定属性与故障机相同的机器。将所有符合条件的机器 IP 通过微信让运维审批选择。此后备机 IP 就能通过变量在其他套餐中获取。

- 使用场景：在组合套餐中调用故障替换的操作套餐前必须先调用过此套餐。

更多变量请参考 [套餐内置变量](../alarm-handling/solutions_parameters_all.md)。



